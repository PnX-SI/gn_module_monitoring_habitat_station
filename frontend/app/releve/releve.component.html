<div class="releve" *ngIf="loadForm">
    <div class="row row-0">
        <div class="card col-xs-12 col-sm-12 col-md-6 col-lg-6 padding-sm tab-container">
            <div class="card-header">
                <h4 class="card-title">{{visit_name}}</h4>
            </div>
            <div>
                <button type="button" class="btn btn-link btn-sm back-button" (click)="backToVisites()">
                    <i class="fa fa-arrow-left" aria-hidden="true"> </i>
                    Retour à la transect n° {{idSite}}
                </button>
            </div>
            <div class="card-body">
                <form [formGroup]="visitForm">
                    <fieldset>
                        <legend>
                            Transect
                        </legend>
                        <div class="form-group">
                            <label> Observateur(s) :* </label>
                            <div id="newObserver">
                                <pnx-observers [parentFormControl]="visitForm.controls.observers" [bindAllItem]="true"
                                    [idMenu]="storeService.shsConfig.id_menu_list_user">
                                </pnx-observers>
                            </div>
                        </div>
                        <div class="form-group">
                            <label> Perturbation(s) : </label>
                            <div>
                                <pnx-nomenclature [parentFormControl]="visitForm.controls.perturbations"
                                    [multiSelect]="true" keyValue="id_nomenclature" [bindAllItem]="true"
                                    keyLabel="label_default" [disabled]="disabledForm"
                                    codeNomenclatureType="TYPE_PERTURBATION">
                                </pnx-nomenclature>
                            </div>
                        </div>
                        <div class="form-group">
                            <label> Date de la visite :* </label>
                            <div>
                                <pnx-date [parentFormControl]="visitForm.controls.visit_date_min">
                                </pnx-date>
                            </div>
                        </div>
                    </fieldset>
                </form>
                <fieldset>
                    <legend>
                        Placettes
                    </legend>

                    <div class="list-plots">
                        <button *ngFor="let plot of currentSite.properties.plots" class="plot"
                            [class.active]="isActive(plot)" (click)="onChangePlot(plot)">code placette :
                            {{ plot.code_plot }} <i class="fa fa-angle-right plot-icon"
                                [class.plot-active]="isActive(plot)" aria-hidden="true"></i>
                            <span *ngIf="plot.isModifided" class="badge  badge-warning">Modifiée</span>
                        </button>
                    </div>
                </fieldset>
            </div>
        </div>

        <div class="card col-xs-12 col-sm-12 col-md-6 col-lg-6 padding-sm ">
            <div id="cover-spin" *ngIf="spinner"></div>
            <plot_relev [id_plot]='id_plot' [taxons]='taxons' [strates]='strates' [(data)]='selectedPolt'
                [plot_title]='plot_title' (plotReleve)='getPlotReleve($event)'>
            </plot_relev>
        </div>
    </div>
    <div class="card-footer">
        <div class="d-flex justify-content-end">
            <button type="submit" class="btn btn-success submit-btn box-shadow" [disabled]="!visitForm.valid"
                (click)="onSubmitVisit()">
                <i class="material-icons">
                    save
                </i> {{submit_label}}
            </button>
        </div>
    </div>
</div>